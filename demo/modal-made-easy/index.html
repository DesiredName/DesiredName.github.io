<!DOCTYPE html>
<html lang="en">

<head>
    <title>DesiredName: Supercharged modals</title>

    <meta charset="UTF-8">
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    >
    <link
        rel="stylesheet"
        href="./assets/style.css"
    >

    <!-- Security -->
    <meta
        http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self';"
    />

    <!-- SEO -->
    <link
        rel="canonical"
        href="https://desiredname.github.io/"
    />
    <meta
        name="description"
        content="DesiredName IT Blog by Krasnov Anton. In this article I'd like to show
        an example of dialog tag usage on HTML pages. Minimum JS/CSS required."
    >
    <meta
        name="robots"
        content="index, nofollow"
    >
    <meta
        name="author"
        content="Krasnov Anton"
    >
    <meta
        name="creator"
        content="Krasnov Anton"
    >
    <meta
        property="og:locale"
        content="en_US"
    >
    <meta
        property="og:title"
        content="DesiredName: Supercharged modals"
    />
    <meta
        property="og:type"
        content="website"
    />
    <meta
        property="og:url"
        content="https://www.linkedin.com/in/anton-krasnov-in-prague/"
    />
</head>

<body>
    <article class="container">
        <h3 class="title">JS superpowers - dialogs made easy ðŸ”¥</h3>

        <div class="content">
            Thanks for the sematic <h3>&lt;dialog&gt;</h3> element, we can create real modals without the CSS
        </div>

        <dialog
            id="dialog"
            class="dialog"
        >
            This is the dialog. Not modal though. You can click-through it.
            <br>
            <br>
            <button
                id="dismiss"
                onclick="handle_close_dialog()"
            >dismiss</button>
        </dialog>

        <dialog
            id="dialog-modal"
            class="dialog modal"
        >
            This is the modal dialog. It has a backdrop, that prevents click-through. Hooray!
            <br>
            <br>
            <button
                id="dismiss"
                onclick="handle_close_dialog_modal()"
            >close it</button>
        </dialog>

        <dialog
            id="dialog-modal-with-return"
            class="dialog modal"
            onclose="handle_modal_with_return_closed(event)"
        >
            Modal can be closed with a return value also! Useful!
            <br>
            <br>
            <button
                id="dismiss"
                onclick="handle_close_dialog_modal_with_return()"
            >close and return some data</button>
        </dialog>


        <section class="buttons">
            <button
                type="button"
                class="button"
                onclick="handle_open_dialog()"
            >
                Show dialog
            </button>

            <button
                type="button"
                class="button"
                onclick="handle_open_dialog_modal()"
            >
                Show modal dialog
            </button>

            <button
                type="button"
                class="button"
                onclick="handle_open_dialog_modal_with_return()"
            >
                Modal dialog can return a value on close
            </button>
        </section>
    </article>

    <script>
        const dialog = document.getElementById('dialog');
        const dialog_modal = document.getElementById('dialog-modal');
        const dialog_modal_with_return = document.getElementById('dialog-modal-with-return');

        function handle_open_dialog() {
            dialog.show();
        }

        function handle_close_dialog() {
            dialog.close();
        }

        function handle_open_dialog_modal() {
            dialog_modal.showModal();
        }

        function handle_close_dialog_modal() {
            dialog_modal.close();
        }

        function handle_modal_with_return_closed(e) {
            const value = JSON.stringify(e.target.returnValue);

            alert(value);
        }

        function handle_open_dialog_modal_with_return() {
            dialog_modal_with_return.showModal();
        }

        function handle_close_dialog_modal_with_return() {
            dialog_modal_with_return.close(JSON.stringify({
                "this": 'JSON',
                'was': 'returned',
                'from': ['modal', 'dialog']
            }));
        }
    </script>
</body>

</html>